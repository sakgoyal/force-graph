"use strict";var io=Object.create;var Je=Object.defineProperty;var ao=Object.getOwnPropertyDescriptor;var so=Object.getOwnPropertyNames;var lo=Object.getPrototypeOf,uo=Object.prototype.hasOwnProperty;var fo=(e,t)=>{for(var r in t)Je(e,r,{get:t[r],enumerable:!0})},tr=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of so(t))!uo.call(e,o)&&o!==r&&Je(e,o,{get:()=>t[o],enumerable:!(n=ao(t,o))||n.enumerable});return e};var rr=(e,t,r)=>(r=e!=null?io(lo(e)):{},tr(t||!e||!e.__esModule?Je(r,"default",{value:e,enumerable:!0}):r,e)),co=e=>tr(Je({},"__esModule",{value:!0}),e);var La={};fo(La,{default:()=>oo});module.exports=co(La);var et="http://www.w3.org/1999/xhtml",Ot={svg:"http://www.w3.org/2000/svg",xhtml:et,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function se(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Ot.hasOwnProperty(t)?{space:Ot[t],local:e}:e}function ho(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===et&&t.documentElement.namespaceURI===et?t.createElement(e):t.createElementNS(r,e)}}function po(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function tt(e){var t=se(e);return(t.local?po:ho)(t)}function mo(){}function ge(e){return e==null?mo:function(){return this.querySelector(e)}}function nr(e){typeof e!="function"&&(e=ge(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,l=n[o]=new Array(a),f,u,s=0;s<a;++s)(f=i[s])&&(u=e.call(f,f.__data__,s,i))&&("__data__"in f&&(u.__data__=f.__data__),l[s]=u);return new U(n,this._parents)}function Dt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function go(){return[]}function Re(e){return e==null?go:function(){return this.querySelectorAll(e)}}function xo(e){return function(){return Dt(e.apply(this,arguments))}}function or(e){typeof e=="function"?e=xo(e):e=Re(e);for(var t=this._groups,r=t.length,n=[],o=[],i=0;i<r;++i)for(var a=t[i],l=a.length,f,u=0;u<l;++u)(f=a[u])&&(n.push(e.call(f,f.__data__,u,a)),o.push(f));return new U(n,o)}function Oe(e){return function(){return this.matches(e)}}function rt(e){return function(t){return t.matches(e)}}var yo=Array.prototype.find;function wo(e){return function(){return yo.call(this.children,e)}}function _o(){return this.firstElementChild}function ir(e){return this.select(e==null?_o:wo(typeof e=="function"?e:rt(e)))}var vo=Array.prototype.filter;function bo(){return Array.from(this.children)}function ko(e){return function(){return vo.call(this.children,e)}}function ar(e){return this.selectAll(e==null?bo:ko(typeof e=="function"?e:rt(e)))}function sr(e){typeof e!="function"&&(e=Oe(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,l=n[o]=[],f,u=0;u<a;++u)(f=i[u])&&e.call(f,f.__data__,u,i)&&l.push(f);return new U(n,this._parents)}function nt(e){return new Array(e.length)}function lr(){return new U(this._enter||this._groups.map(nt),this._parents)}function De(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}De.prototype={constructor:De,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ur(e){return function(){return e}}function Co(e,t,r,n,o,i){for(var a=0,l,f=t.length,u=i.length;a<u;++a)(l=t[a])?(l.__data__=i[a],n[a]=l):r[a]=new De(e,i[a]);for(;a<f;++a)(l=t[a])&&(o[a]=l)}function Po(e,t,r,n,o,i,a){var l,f,u=new Map,s=t.length,p=i.length,h=new Array(s),d;for(l=0;l<s;++l)(f=t[l])&&(h[l]=d=a.call(f,f.__data__,l,t)+"",u.has(d)?o[l]=f:u.set(d,f));for(l=0;l<p;++l)d=a.call(e,i[l],l,i)+"",(f=u.get(d))?(n[l]=f,f.__data__=i[l],u.delete(d)):r[l]=new De(e,i[l]);for(l=0;l<s;++l)(f=t[l])&&u.get(h[l])===f&&(o[l]=f)}function Eo(e){return e.__data__}function fr(e,t){if(!arguments.length)return Array.from(this,Eo);var r=t?Po:Co,n=this._parents,o=this._groups;typeof e!="function"&&(e=ur(e));for(var i=o.length,a=new Array(i),l=new Array(i),f=new Array(i),u=0;u<i;++u){var s=n[u],p=o[u],h=p.length,d=So(e.call(s,s&&s.__data__,u,n)),x=d.length,w=l[u]=new Array(x),k=a[u]=new Array(x),_=f[u]=new Array(h);r(s,p,w,k,_,d,t);for(var A=0,N=0,m,P;A<x;++A)if(m=w[A]){for(A>=N&&(N=A+1);!(P=k[N])&&++N<x;);m._next=P||null}}return a=new U(a,n),a._enter=l,a._exit=f,a}function So(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cr(){return new U(this._exit||this._groups.map(nt),this._parents)}function hr(e,t,r){var n=this.enter(),o=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}function pr(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,o=r.length,i=n.length,a=Math.min(o,i),l=new Array(o),f=0;f<a;++f)for(var u=r[f],s=n[f],p=u.length,h=l[f]=new Array(p),d,x=0;x<p;++x)(d=u[x]||s[x])&&(h[x]=d);for(;f<o;++f)l[f]=r[f];return new U(l,this._parents)}function dr(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,i=n[o],a;--o>=0;)(a=n[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function mr(e){e||(e=To);function t(p,h){return p&&h?e(p.__data__,h.__data__):!p-!h}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var a=r[i],l=a.length,f=o[i]=new Array(l),u,s=0;s<l;++s)(u=a[s])&&(f[s]=u);f.sort(t)}return new U(o,this._parents).order()}function To(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function gr(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function xr(){return Array.from(this)}function yr(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length;o<i;++o){var a=n[o];if(a)return a}return null}function wr(){let e=0;for(let t of this)++e;return e}function _r(){return!this.node()}function vr(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,a=o.length,l;i<a;++i)(l=o[i])&&e.call(l,l.__data__,i,o);return this}function Ro(e){return function(){this.removeAttribute(e)}}function Oo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Do(e,t){return function(){this.setAttribute(e,t)}}function Mo(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ao(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Io(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function br(e,t){var r=se(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Oo:Ro:typeof t=="function"?r.local?Io:Ao:r.local?Mo:Do)(r,t))}function ot(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function No(e){return function(){this.style.removeProperty(e)}}function zo(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Lo(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function kr(e,t,r){return arguments.length>1?this.each((t==null?No:typeof t=="function"?Lo:zo)(e,t,r??"")):fe(this.node(),e)}function fe(e,t){return e.style.getPropertyValue(t)||ot(e).getComputedStyle(e,null).getPropertyValue(t)}function Uo(e){return function(){delete this[e]}}function Bo(e,t){return function(){this[e]=t}}function Fo(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Cr(e,t){return arguments.length>1?this.each((t==null?Uo:typeof t=="function"?Fo:Bo)(e,t)):this.node()[e]}function Pr(e){return e.trim().split(/^|\s+/)}function Mt(e){return e.classList||new Er(e)}function Er(e){this._node=e,this._names=Pr(e.getAttribute("class")||"")}Er.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Sr(e,t){for(var r=Mt(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function Tr(e,t){for(var r=Mt(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function qo(e){return function(){Sr(this,e)}}function $o(e){return function(){Tr(this,e)}}function Vo(e,t){return function(){(t.apply(this,arguments)?Sr:Tr)(this,e)}}function Rr(e,t){var r=Pr(e+"");if(arguments.length<2){for(var n=Mt(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?Vo:t?qo:$o)(r,t))}function Go(){this.textContent=""}function Ho(e){return function(){this.textContent=e}}function Yo(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Or(e){return arguments.length?this.each(e==null?Go:(typeof e=="function"?Yo:Ho)(e)):this.node().textContent}function Xo(){this.innerHTML=""}function Wo(e){return function(){this.innerHTML=e}}function jo(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Dr(e){return arguments.length?this.each(e==null?Xo:(typeof e=="function"?jo:Wo)(e)):this.node().innerHTML}function Zo(){this.nextSibling&&this.parentNode.appendChild(this)}function Mr(){return this.each(Zo)}function Ko(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ar(){return this.each(Ko)}function Ir(e){var t=typeof e=="function"?e:tt(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Qo(){return null}function Nr(e,t){var r=typeof e=="function"?e:tt(e),n=t==null?Qo:typeof t=="function"?t:ge(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Jo(){var e=this.parentNode;e&&e.removeChild(this)}function zr(){return this.each(Jo)}function ei(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ti(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lr(e){return this.select(e?ti:ei)}function Ur(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ri(e){return function(t){e.call(this,t,this.__data__)}}function ni(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function oi(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,o=t.length,i;r<o;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function ii(e,t,r){return function(){var n=this.__on,o,i=ri(t);if(n){for(var a=0,l=n.length;a<l;++a)if((o=n[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=t;return}}this.addEventListener(e.type,i,r),o={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(o):this.__on=[o]}}function Br(e,t,r){var n=ni(e+""),o,i=n.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,u=l.length,s;f<u;++f)for(o=0,s=l[f];o<i;++o)if((a=n[o]).type===s.type&&a.name===s.name)return s.value}return}for(l=t?ii:oi,o=0;o<i;++o)this.each(l(n[o],t,r));return this}function Fr(e,t,r){var n=ot(e),o=n.CustomEvent;typeof o=="function"?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function ai(e,t){return function(){return Fr(this,e,t)}}function si(e,t){return function(){return Fr(this,e,t.apply(this,arguments))}}function qr(e,t){return this.each((typeof t=="function"?si:ai)(e,t))}function*$r(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length,a;o<i;++o)(a=n[o])&&(yield a)}var At=[null];function U(e,t){this._groups=e,this._parents=t}function Vr(){return new U([[document.documentElement]],At)}function li(){return this}U.prototype=Vr.prototype={constructor:U,select:nr,selectAll:or,selectChild:ir,selectChildren:ar,filter:sr,data:fr,enter:lr,exit:cr,join:hr,merge:pr,selection:li,order:dr,sort:mr,call:gr,nodes:xr,node:yr,size:wr,empty:_r,each:vr,attr:br,style:kr,property:Cr,classed:Rr,text:Or,html:Dr,raise:Mr,lower:Ar,append:Ir,insert:Nr,remove:zr,clone:Lr,datum:Ur,on:Br,dispatch:qr,[Symbol.iterator]:$r};var le=Vr;function V(e){return typeof e=="string"?new U([[document.querySelector(e)]],[document.documentElement]):new U([[e]],At)}function Gr(e){let t;for(;t=e.sourceEvent;)e=t;return e}function j(e,t){if(e=Gr(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}var ui={value:()=>{}};function Yr(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new it(r)}function it(e){this._=e}function fi(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}it.prototype=Yr.prototype={constructor:it,on:function(e,t){var r=this._,n=fi(e+"",r),o,i=-1,a=n.length;if(arguments.length<2){for(;++i<a;)if((o=(e=n[i]).type)&&(o=ci(r[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=n[i]).type)r[o]=Hr(r[o],e.name,t);else if(t==null)for(o in r)r[o]=Hr(r[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new it(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,i;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,o=i.length;n<o;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,i=n.length;o<i;++o)n[o].value.apply(t,r)}};function ci(e,t){for(var r=0,n=e.length,o;r<n;++r)if((o=e[r]).name===t)return o.value}function Hr(e,t,r){for(var n=0,o=e.length;n<o;++n)if(e[n].name===t){e[n]=ui,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var xe=Yr;var Xr={passive:!1},ye={capture:!0,passive:!1};function at(e){e.stopImmediatePropagation()}function ce(e){e.preventDefault(),e.stopImmediatePropagation()}function Me(e){var t=e.document.documentElement,r=V(e).on("dragstart.drag",ce,ye);"onselectstart"in t?r.on("selectstart.drag",ce,ye):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ae(e,t){var r=e.document.documentElement,n=V(e).on("dragstart.drag",null);t&&(n.on("click.drag",ce,ye),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var Ie=e=>()=>e;function Ne(e,{sourceEvent:t,subject:r,target:n,identifier:o,active:i,x:a,y:l,dx:f,dy:u,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:s}})}Ne.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function hi(e){return!e.ctrlKey&&!e.button}function pi(){return this.parentNode}function di(e,t){return t??{x:e.x,y:e.y}}function mi(){return navigator.maxTouchPoints||"ontouchstart"in this}function It(){var e=hi,t=pi,r=di,n=mi,o={},i=xe("start","drag","end"),a=0,l,f,u,s,p=0;function h(m){m.on("mousedown.drag",d).filter(n).on("touchstart.drag",k).on("touchmove.drag",_,Xr).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(m,P){if(!(s||!e.call(this,m,P))){var C=N(this,t.call(this,m,P),m,P,"mouse");C&&(V(m.view).on("mousemove.drag",x,ye).on("mouseup.drag",w,ye),Me(m.view),at(m),u=!1,l=m.clientX,f=m.clientY,C("start",m))}}function x(m){if(ce(m),!u){var P=m.clientX-l,C=m.clientY-f;u=P*P+C*C>p}o.mouse("drag",m)}function w(m){V(m.view).on("mousemove.drag mouseup.drag",null),Ae(m.view,u),ce(m),o.mouse("end",m)}function k(m,P){if(e.call(this,m,P)){var C=m.changedTouches,v=t.call(this,m,P),O=C.length,D,L;for(D=0;D<O;++D)(L=N(this,v,m,P,C[D].identifier,C[D]))&&(at(m),L("start",m,C[D]))}}function _(m){var P=m.changedTouches,C=P.length,v,O;for(v=0;v<C;++v)(O=o[P[v].identifier])&&(ce(m),O("drag",m,P[v]))}function A(m){var P=m.changedTouches,C=P.length,v,O;for(s&&clearTimeout(s),s=setTimeout(function(){s=null},500),v=0;v<C;++v)(O=o[P[v].identifier])&&(at(m),O("end",m,P[v]))}function N(m,P,C,v,O,D){var L=i.copy(),z=j(D||C,P),X,K,c;if((c=r.call(m,new Ne("beforestart",{sourceEvent:C,target:h,identifier:O,active:a,x:z[0],y:z[1],dx:0,dy:0,dispatch:L}),v))!=null)return X=c.x-z[0]||0,K=c.y-z[1]||0,function y(g,b,E){var S=z,T;switch(g){case"start":o[O]=y,T=a++;break;case"end":delete o[O],--a;case"drag":z=j(E||b,P),T=a;break}L.call(g,m,new Ne(g,{sourceEvent:b,subject:c,target:h,identifier:O,active:T,x:z[0]+X,y:z[1]+K,dx:z[0]-S[0],dy:z[1]-S[1],dispatch:L}),v)}}return h.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Ie(!!m),h):e},h.container=function(m){return arguments.length?(t=typeof m=="function"?m:Ie(m),h):t},h.subject=function(m){return arguments.length?(r=typeof m=="function"?m:Ie(m),h):r},h.touchable=function(m){return arguments.length?(n=typeof m=="function"?m:Ie(!!m),h):n},h.on=function(){var m=i.on.apply(i,arguments);return m===i?h:m},h.clickDistance=function(m){return arguments.length?(p=(m=+m)*m,h):Math.sqrt(p)},h}function st(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Nt(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ue(){}var ze=.7,ft=1/ze,ke="\\s*([+-]?\\d+)\\s*",Le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gi=/^#([0-9a-f]{3,8})$/,xi=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),yi=new RegExp(`^rgb\\(${ne},${ne},${ne}\\)$`),wi=new RegExp(`^rgba\\(${ke},${ke},${ke},${Le}\\)$`),_i=new RegExp(`^rgba\\(${ne},${ne},${ne},${Le}\\)$`),vi=new RegExp(`^hsl\\(${Le},${ne},${ne}\\)$`),bi=new RegExp(`^hsla\\(${Le},${ne},${ne},${Le}\\)$`),Wr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};st(Ue,he,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jr,formatHex:jr,formatHex8:ki,formatHsl:Ci,formatRgb:Zr,toString:Zr});function jr(){return this.rgb().formatHex()}function ki(){return this.rgb().formatHex8()}function Ci(){return rn(this).formatHsl()}function Zr(){return this.rgb().formatRgb()}function he(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=gi.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Kr(t):r===3?new Y(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?lt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?lt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xi.exec(e))?new Y(t[1],t[2],t[3],1):(t=yi.exec(e))?new Y(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wi.exec(e))?lt(t[1],t[2],t[3],t[4]):(t=_i.exec(e))?lt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vi.exec(e))?en(t[1],t[2]/100,t[3]/100,1):(t=bi.exec(e))?en(t[1],t[2]/100,t[3]/100,t[4]):Wr.hasOwnProperty(e)?Kr(Wr[e]):e==="transparent"?new Y(NaN,NaN,NaN,0):null}function Kr(e){return new Y(e>>16&255,e>>8&255,e&255,1)}function lt(e,t,r,n){return n<=0&&(e=t=r=NaN),new Y(e,t,r,n)}function Pi(e){return e instanceof Ue||(e=he(e)),e?(e=e.rgb(),new Y(e.r,e.g,e.b,e.opacity)):new Y}function Ce(e,t,r,n){return arguments.length===1?Pi(e):new Y(e,t,r,n??1)}function Y(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}st(Y,Ce,Nt(Ue,{brighter(e){return e=e==null?ft:Math.pow(ft,e),new Y(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ze:Math.pow(ze,e),new Y(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Y(_e(this.r),_e(this.g),_e(this.b),ct(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qr,formatHex:Qr,formatHex8:Ei,formatRgb:Jr,toString:Jr}));function Qr(){return`#${we(this.r)}${we(this.g)}${we(this.b)}`}function Ei(){return`#${we(this.r)}${we(this.g)}${we(this.b)}${we((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jr(){let e=ct(this.opacity);return`${e===1?"rgb(":"rgba("}${_e(this.r)}, ${_e(this.g)}, ${_e(this.b)}${e===1?")":`, ${e})`}`}function ct(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _e(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function we(e){return e=_e(e),(e<16?"0":"")+e.toString(16)}function en(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ee(e,t,r,n)}function rn(e){if(e instanceof ee)return new ee(e.h,e.s,e.l,e.opacity);if(e instanceof Ue||(e=he(e)),!e)return new ee;if(e instanceof ee)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),i=Math.max(t,r,n),a=NaN,l=i-o,f=(i+o)/2;return l?(t===i?a=(r-n)/l+(r<n)*6:r===i?a=(n-t)/l+2:a=(t-r)/l+4,l/=f<.5?i+o:2-i-o,a*=60):l=f>0&&f<1?0:a,new ee(a,l,f,e.opacity)}function nn(e,t,r,n){return arguments.length===1?rn(e):new ee(e,t,r,n??1)}function ee(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}st(ee,nn,Nt(Ue,{brighter(e){return e=e==null?ft:Math.pow(ft,e),new ee(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ze:Math.pow(ze,e),new ee(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new Y(zt(e>=240?e-240:e+120,o,n),zt(e,o,n),zt(e<120?e+240:e-120,o,n),this.opacity)},clamp(){return new ee(tn(this.h),ut(this.s),ut(this.l),ct(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=ct(this.opacity);return`${e===1?"hsl(":"hsla("}${tn(this.h)}, ${ut(this.s)*100}%, ${ut(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tn(e){return e=(e||0)%360,e<0?e+360:e}function ut(e){return Math.max(0,Math.min(1,e||0))}function zt(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function Lt(e,t,r,n,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*r+(1+3*e+3*i-3*a)*n+a*o)/6}function on(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[n],i=e[n+1],a=n>0?e[n-1]:2*o-i,l=n<t-1?e[n+2]:2*i-o;return Lt((r-n/t)*t,a,o,i,l)}}function an(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),o=e[(n+t-1)%t],i=e[n%t],a=e[(n+1)%t],l=e[(n+2)%t];return Lt((r-n/t)*t,o,i,a,l)}}var Ut=e=>()=>e;function Si(e,t){return function(r){return e+r*t}}function Ti(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function sn(e){return(e=+e)==1?ht:function(t,r){return r-t?Ti(t,r,e):Ut(isNaN(t)?r:t)}}function ht(e,t){var r=t-e;return r?Si(e,r):Ut(isNaN(e)?t:e)}var pt=function e(t){var r=sn(t);function n(o,i){var a=r((o=Ce(o)).r,(i=Ce(i)).r),l=r(o.g,i.g),f=r(o.b,i.b),u=ht(o.opacity,i.opacity);return function(s){return o.r=a(s),o.g=l(s),o.b=f(s),o.opacity=u(s),o+""}}return n.gamma=e,n}(1);function ln(e){return function(t){var r=t.length,n=new Array(r),o=new Array(r),i=new Array(r),a,l;for(a=0;a<r;++a)l=Ce(t[a]),n[a]=l.r||0,o[a]=l.g||0,i[a]=l.b||0;return n=e(n),o=e(o),i=e(i),l.opacity=1,function(f){return l.r=n(f),l.g=o(f),l.b=i(f),l+""}}}var Ri=ln(on),Oi=ln(an);function Z(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Ft=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bt=new RegExp(Ft.source,"g");function Di(e){return function(){return e}}function Mi(e){return function(t){return e(t)+""}}function qt(e,t){var r=Ft.lastIndex=Bt.lastIndex=0,n,o,i,a=-1,l=[],f=[];for(e=e+"",t=t+"";(n=Ft.exec(e))&&(o=Bt.exec(t));)(i=o.index)>r&&(i=t.slice(r,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,f.push({i:a,x:Z(n,o)})),r=Bt.lastIndex;return r<t.length&&(i=t.slice(r),l[a]?l[a]+=i:l[++a]=i),l.length<2?f[0]?Mi(f[0].x):Di(t):(t=f.length,function(u){for(var s=0,p;s<t;++s)l[(p=f[s]).i]=p.x(u);return l.join("")})}var un=180/Math.PI,dt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $t(e,t,r,n,o,i){var a,l,f;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(f=e*r+t*n)&&(r-=e*f,n-=t*f),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,f/=l),e*n<t*r&&(e=-e,t=-t,f=-f,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*un,skewX:Math.atan(f)*un,scaleX:a,scaleY:l}}var mt;function fn(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dt:$t(t.a,t.b,t.c,t.d,t.e,t.f)}function cn(e){return e==null?dt:(mt||(mt=document.createElementNS("http://www.w3.org/2000/svg","g")),mt.setAttribute("transform",e),(e=mt.transform.baseVal.consolidate())?(e=e.matrix,$t(e.a,e.b,e.c,e.d,e.e,e.f)):dt)}function hn(e,t,r,n){function o(u){return u.length?u.pop()+" ":""}function i(u,s,p,h,d,x){if(u!==p||s!==h){var w=d.push("translate(",null,t,null,r);x.push({i:w-4,x:Z(u,p)},{i:w-2,x:Z(s,h)})}else(p||h)&&d.push("translate("+p+t+h+r)}function a(u,s,p,h){u!==s?(u-s>180?s+=360:s-u>180&&(u+=360),h.push({i:p.push(o(p)+"rotate(",null,n)-2,x:Z(u,s)})):s&&p.push(o(p)+"rotate("+s+n)}function l(u,s,p,h){u!==s?h.push({i:p.push(o(p)+"skewX(",null,n)-2,x:Z(u,s)}):s&&p.push(o(p)+"skewX("+s+n)}function f(u,s,p,h,d,x){if(u!==p||s!==h){var w=d.push(o(d)+"scale(",null,",",null,")");x.push({i:w-4,x:Z(u,p)},{i:w-2,x:Z(s,h)})}else(p!==1||h!==1)&&d.push(o(d)+"scale("+p+","+h+")")}return function(u,s){var p=[],h=[];return u=e(u),s=e(s),i(u.translateX,u.translateY,s.translateX,s.translateY,p,h),a(u.rotate,s.rotate,p,h),l(u.skewX,s.skewX,p,h),f(u.scaleX,u.scaleY,s.scaleX,s.scaleY,p,h),u=s=null,function(d){for(var x=-1,w=h.length,k;++x<w;)p[(k=h[x]).i]=k.x(d);return p.join("")}}}var Vt=hn(fn,"px, ","px)","deg)"),Gt=hn(cn,", ",")",")");var Ai=1e-12;function pn(e){return((e=Math.exp(e))+1/e)/2}function Ii(e){return((e=Math.exp(e))-1/e)/2}function Ni(e){return((e=Math.exp(2*e))-1)/(e+1)}var Ht=function e(t,r,n){function o(i,a){var l=i[0],f=i[1],u=i[2],s=a[0],p=a[1],h=a[2],d=s-l,x=p-f,w=d*d+x*x,k,_;if(w<Ai)_=Math.log(h/u)/t,k=function(v){return[l+v*d,f+v*x,u*Math.exp(t*v*_)]};else{var A=Math.sqrt(w),N=(h*h-u*u+n*w)/(2*u*r*A),m=(h*h-u*u-n*w)/(2*h*r*A),P=Math.log(Math.sqrt(N*N+1)-N),C=Math.log(Math.sqrt(m*m+1)-m);_=(C-P)/t,k=function(v){var O=v*_,D=pn(P),L=u/(r*A)*(D*Ni(t*O+P)-Ii(P));return[l+L*d,f+L*x,u*D/pn(t*O+P)]}}return k.duration=_*1e3*t/Math.SQRT2,k}return o.rho=function(i){var a=Math.max(.001,+i),l=a*a,f=l*l;return e(a,l,f)},o}(Math.SQRT2,2,4);var Pe=0,Fe=0,Be=0,mn=1e3,gt,qe,xt=0,ve=0,yt=0,$e=typeof performance=="object"&&performance.now?performance:Date,gn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ge(){return ve||(gn(zi),ve=$e.now()+yt)}function zi(){ve=0}function Ve(){this._call=this._time=this._next=null}Ve.prototype=wt.prototype={constructor:Ve,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Ge():+r)+(t==null?0:+t),!this._next&&qe!==this&&(qe?qe._next=this:gt=this,qe=this),this._call=e,this._time=r,Yt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yt())}};function wt(e,t,r){var n=new Ve;return n.restart(e,t,r),n}function xn(){Ge(),++Pe;for(var e=gt,t;e;)(t=ve-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pe}function dn(){ve=(xt=$e.now())+yt,Pe=Fe=0;try{xn()}finally{Pe=0,Ui(),ve=0}}function Li(){var e=$e.now(),t=e-xt;t>mn&&(yt-=t,xt=e)}function Ui(){for(var e,t=gt,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:gt=r);qe=e,Yt(n)}function Yt(e){if(!Pe){Fe&&(Fe=clearTimeout(Fe));var t=e-ve;t>24?(e<1/0&&(Fe=setTimeout(dn,e-$e.now()-yt)),Be&&(Be=clearInterval(Be))):(Be||(xt=$e.now(),Be=setInterval(Li,mn)),Pe=1,gn(dn))}}function _t(e,t,r){var n=new Ve;return t=t==null?0:+t,n.restart(o=>{n.stop(),e(o+t)},t,r),n}var Bi=xe("start","end","cancel","interrupt"),Fi=[],_n=0,yn=1,bt=2,vt=3,wn=4,kt=5,He=6;function pe(e,t,r,n,o,i){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;qi(e,r,{name:t,index:n,group:o,on:Bi,tween:Fi,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:_n})}function Ye(e,t){var r=F(e,t);if(r.state>_n)throw new Error("too late; already scheduled");return r}function $(e,t){var r=F(e,t);if(r.state>vt)throw new Error("too late; already running");return r}function F(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function qi(e,t,r){var n=e.__transition,o;n[t]=r,r.timer=wt(i,0,r.time);function i(u){r.state=yn,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var s,p,h,d;if(r.state!==yn)return f();for(s in n)if(d=n[s],d.name===r.name){if(d.state===vt)return _t(a);d.state===wn?(d.state=He,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete n[s]):+s<t&&(d.state=He,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete n[s])}if(_t(function(){r.state===vt&&(r.state=wn,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=bt,r.on.call("start",e,e.__data__,r.index,r.group),r.state===bt){for(r.state=vt,o=new Array(h=r.tween.length),s=0,p=-1;s<h;++s)(d=r.tween[s].value.call(e,e.__data__,r.index,r.group))&&(o[++p]=d);o.length=p+1}}function l(u){for(var s=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(f),r.state=kt,1),p=-1,h=o.length;++p<h;)o[p].call(e,s);r.state===kt&&(r.on.call("end",e,e.__data__,r.index,r.group),f())}function f(){r.state=He,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function be(e,t){var r=e.__transition,n,o,i=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((n=r[a]).name!==t){i=!1;continue}o=n.state>bt&&n.state<kt,n.state=He,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[a]}i&&delete e.__transition}}function vn(e){return this.each(function(){be(this,e)})}function $i(e,t){var r,n;return function(){var o=$(this,e),i=o.tween;if(i!==r){n=r=i;for(var a=0,l=n.length;a<l;++a)if(n[a].name===t){n=n.slice(),n.splice(a,1);break}}o.tween=n}}function Vi(e,t,r){var n,o;if(typeof r!="function")throw new Error;return function(){var i=$(this,e),a=i.tween;if(a!==n){o=(n=a).slice();for(var l={name:t,value:r},f=0,u=o.length;f<u;++f)if(o[f].name===t){o[f]=l;break}f===u&&o.push(l)}i.tween=o}}function bn(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=F(this.node(),r).tween,o=0,i=n.length,a;o<i;++o)if((a=n[o]).name===e)return a.value;return null}return this.each((t==null?$i:Vi)(r,e,t))}function Ee(e,t,r){var n=e._id;return e.each(function(){var o=$(this,n);(o.value||(o.value={}))[t]=r.apply(this,arguments)}),function(o){return F(o,n).value[t]}}function Ct(e,t){var r;return(typeof t=="number"?Z:t instanceof he?pt:(r=he(t))?(t=r,pt):qt)(e,t)}function Gi(e){return function(){this.removeAttribute(e)}}function Hi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yi(e,t,r){var n,o=r+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===n?i:i=t(n=a,r)}}function Xi(e,t,r){var n,o=r+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===n?i:i=t(n=a,r)}}function Wi(e,t,r){var n,o,i;return function(){var a,l=r(this),f;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),f=l+"",a===f?null:a===n&&f===o?i:(o=f,i=t(n=a,l)))}}function ji(e,t,r){var n,o,i;return function(){var a,l=r(this),f;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),f=l+"",a===f?null:a===n&&f===o?i:(o=f,i=t(n=a,l)))}}function kn(e,t){var r=se(e),n=r==="transform"?Gt:Ct;return this.attrTween(e,typeof t=="function"?(r.local?ji:Wi)(r,n,Ee(this,"attr."+e,t)):t==null?(r.local?Hi:Gi)(r):(r.local?Xi:Yi)(r,n,t))}function Zi(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Ki(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Qi(e,t){var r,n;function o(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&Ki(e,i)),r}return o._value=t,o}function Ji(e,t){var r,n;function o(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&Zi(e,i)),r}return o._value=t,o}function Cn(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=se(e);return this.tween(r,(n.local?Qi:Ji)(n,t))}function ea(e,t){return function(){Ye(this,e).delay=+t.apply(this,arguments)}}function ta(e,t){return t=+t,function(){Ye(this,e).delay=t}}function Pn(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ea:ta)(t,e)):F(this.node(),t).delay}function ra(e,t){return function(){$(this,e).duration=+t.apply(this,arguments)}}function na(e,t){return t=+t,function(){$(this,e).duration=t}}function En(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ra:na)(t,e)):F(this.node(),t).duration}function oa(e,t){if(typeof t!="function")throw new Error;return function(){$(this,e).ease=t}}function Sn(e){var t=this._id;return arguments.length?this.each(oa(t,e)):F(this.node(),t).ease}function ia(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;$(this,e).ease=r}}function Tn(e){if(typeof e!="function")throw new Error;return this.each(ia(this._id,e))}function Rn(e){typeof e!="function"&&(e=Oe(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,l=n[o]=[],f,u=0;u<a;++u)(f=i[u])&&e.call(f,f.__data__,u,i)&&l.push(f);return new H(n,this._parents,this._name,this._id)}function On(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,o=r.length,i=Math.min(n,o),a=new Array(n),l=0;l<i;++l)for(var f=t[l],u=r[l],s=f.length,p=a[l]=new Array(s),h,d=0;d<s;++d)(h=f[d]||u[d])&&(p[d]=h);for(;l<n;++l)a[l]=t[l];return new H(a,this._parents,this._name,this._id)}function aa(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function sa(e,t,r){var n,o,i=aa(t)?Ye:$;return function(){var a=i(this,e),l=a.on;l!==n&&(o=(n=l).copy()).on(t,r),a.on=o}}function Dn(e,t){var r=this._id;return arguments.length<2?F(this.node(),r).on.on(e):this.each(sa(r,e,t))}function la(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Mn(){return this.on("end.remove",la(this._id))}function An(e){var t=this._name,r=this._id;typeof e!="function"&&(e=ge(e));for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a)for(var l=n[a],f=l.length,u=i[a]=new Array(f),s,p,h=0;h<f;++h)(s=l[h])&&(p=e.call(s,s.__data__,h,l))&&("__data__"in s&&(p.__data__=s.__data__),u[h]=p,pe(u[h],t,r,h,u,F(s,r)));return new H(i,this._parents,t,r)}function In(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Re(e));for(var n=this._groups,o=n.length,i=[],a=[],l=0;l<o;++l)for(var f=n[l],u=f.length,s,p=0;p<u;++p)if(s=f[p]){for(var h=e.call(s,s.__data__,p,f),d,x=F(s,r),w=0,k=h.length;w<k;++w)(d=h[w])&&pe(d,t,r,w,h,x);i.push(h),a.push(s)}return new H(i,a,t,r)}var ua=le.prototype.constructor;function Nn(){return new ua(this._groups,this._parents)}function fa(e,t){var r,n,o;return function(){var i=fe(this,e),a=(this.style.removeProperty(e),fe(this,e));return i===a?null:i===r&&a===n?o:o=t(r=i,n=a)}}function zn(e){return function(){this.style.removeProperty(e)}}function ca(e,t,r){var n,o=r+"",i;return function(){var a=fe(this,e);return a===o?null:a===n?i:i=t(n=a,r)}}function ha(e,t,r){var n,o,i;return function(){var a=fe(this,e),l=r(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(e),fe(this,e))),a===f?null:a===n&&f===o?i:(o=f,i=t(n=a,l))}}function pa(e,t){var r,n,o,i="style."+t,a="end."+i,l;return function(){var f=$(this,e),u=f.on,s=f.value[i]==null?l||(l=zn(t)):void 0;(u!==r||o!==s)&&(n=(r=u).copy()).on(a,o=s),f.on=n}}function Ln(e,t,r){var n=(e+="")=="transform"?Vt:Ct;return t==null?this.styleTween(e,fa(e,n)).on("end.style."+e,zn(e)):typeof t=="function"?this.styleTween(e,ha(e,n,Ee(this,"style."+e,t))).each(pa(this._id,e)):this.styleTween(e,ca(e,n,t),r).on("end.style."+e,null)}function da(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function ma(e,t,r){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&da(e,a,r)),n}return i._value=t,i}function Un(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,ma(e,t,r??""))}function ga(e){return function(){this.textContent=e}}function xa(e){return function(){var t=e(this);this.textContent=t??""}}function Bn(e){return this.tween("text",typeof e=="function"?xa(Ee(this,"text",e)):ga(e==null?"":e+""))}function ya(e){return function(t){this.textContent=e.call(this,t)}}function wa(e){var t,r;function n(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&ya(o)),t}return n._value=e,n}function Fn(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,wa(e))}function qn(){for(var e=this._name,t=this._id,r=Pt(),n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],l=a.length,f,u=0;u<l;++u)if(f=a[u]){var s=F(f,t);pe(f,e,r,u,a,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new H(n,this._parents,e,r)}function $n(){var e,t,r=this,n=r._id,o=r.size();return new Promise(function(i,a){var l={value:a},f={value:function(){--o===0&&i()}};r.each(function(){var u=$(this,n),s=u.on;s!==e&&(t=(e=s).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(f)),u.on=t}),o===0&&i()})}var _a=0;function H(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Vn(e){return le().transition(e)}function Pt(){return++_a}var ue=le.prototype;H.prototype=Vn.prototype={constructor:H,select:An,selectAll:In,selectChild:ue.selectChild,selectChildren:ue.selectChildren,filter:Rn,merge:On,selection:Nn,transition:qn,call:ue.call,nodes:ue.nodes,node:ue.node,size:ue.size,empty:ue.empty,each:ue.each,on:Dn,attr:kn,attrTween:Cn,style:Ln,styleTween:Un,text:Bn,textTween:Fn,remove:Mn,tween:bn,delay:Pn,duration:En,ease:Sn,easeVarying:Tn,end:$n,[Symbol.iterator]:ue[Symbol.iterator]};function Et(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var va={time:null,delay:0,duration:250,ease:Et};function ba(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Gn(e){var t,r;e instanceof H?(t=e._id,e=e._name):(t=Pt(),(r=va).time=Ge(),e=e==null?null:e+"");for(var n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],l=a.length,f,u=0;u<l;++u)(f=a[u])&&pe(f,e,t,u,a,r||ba(f,t));return new H(n,this._parents,e,t)}le.prototype.interrupt=vn;le.prototype.transition=Gn;var Xe=e=>()=>e;function Xt(e,{sourceEvent:t,target:r,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function te(e,t,r){this.k=e,this.x=t,this.y=r}te.prototype={constructor:te,scale:function(e){return e===1?this:new te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var We=new te(1,0,0);W.prototype=te.prototype;function W(e){for(;!e.__zoom;)if(!(e=e.parentNode))return We;return e.__zoom}function St(e){e.stopImmediatePropagation()}function Se(e){e.preventDefault(),e.stopImmediatePropagation()}function ka(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ca(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Hn(){return this.__zoom||We}function Pa(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ea(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sa(e,t,r){var n=e.invertX(t[0][0])-r[0][0],o=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],a=e.invertY(t[1][1])-r[1][1];return e.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Wt(){var e=ka,t=Ca,r=Sa,n=Pa,o=Ea,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,f=Ht,u=xe("start","zoom","end"),s,p,h,d=500,x=150,w=0,k=10;function _(c){c.property("__zoom",Hn).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",L).filter(o).on("touchstart.zoom",z).on("touchmove.zoom",X).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(c,y,g,b){var E=c.selection?c.selection():c;E.property("__zoom",Hn),c!==E?P(c,y,g,b):E.interrupt().each(function(){C(this,arguments).event(b).start().zoom(null,typeof y=="function"?y.apply(this,arguments):y).end()})},_.scaleBy=function(c,y,g,b){_.scaleTo(c,function(){var E=this.__zoom.k,S=typeof y=="function"?y.apply(this,arguments):y;return E*S},g,b)},_.scaleTo=function(c,y,g,b){_.transform(c,function(){var E=t.apply(this,arguments),S=this.__zoom,T=g==null?m(E):typeof g=="function"?g.apply(this,arguments):g,M=S.invert(T),B=typeof y=="function"?y.apply(this,arguments):y;return r(N(A(S,B),T,M),E,a)},g,b)},_.translateBy=function(c,y,g,b){_.transform(c,function(){return r(this.__zoom.translate(typeof y=="function"?y.apply(this,arguments):y,typeof g=="function"?g.apply(this,arguments):g),t.apply(this,arguments),a)},null,b)},_.translateTo=function(c,y,g,b,E){_.transform(c,function(){var S=t.apply(this,arguments),T=this.__zoom,M=b==null?m(S):typeof b=="function"?b.apply(this,arguments):b;return r(We.translate(M[0],M[1]).scale(T.k).translate(typeof y=="function"?-y.apply(this,arguments):-y,typeof g=="function"?-g.apply(this,arguments):-g),S,a)},b,E)};function A(c,y){return y=Math.max(i[0],Math.min(i[1],y)),y===c.k?c:new te(y,c.x,c.y)}function N(c,y,g){var b=y[0]-g[0]*c.k,E=y[1]-g[1]*c.k;return b===c.x&&E===c.y?c:new te(c.k,b,E)}function m(c){return[(+c[0][0]+ +c[1][0])/2,(+c[0][1]+ +c[1][1])/2]}function P(c,y,g,b){c.on("start.zoom",function(){C(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(b).end()}).tween("zoom",function(){var E=this,S=arguments,T=C(E,S).event(b),M=t.apply(E,S),B=g==null?m(M):typeof g=="function"?g.apply(E,S):g,re=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),q=E.__zoom,Q=typeof y=="function"?y.apply(E,S):y,ie=f(q.invert(B).concat(re/q.k),Q.invert(B).concat(re/Q.k));return function(J){if(J===1)J=Q;else{var ae=ie(J),Rt=re/ae[2];J=new te(Rt,B[0]-ae[0]*Rt,B[1]-ae[1]*Rt)}T.zoom(null,J)}})}function C(c,y,g){return!g&&c.__zooming||new v(c,y)}function v(c,y){this.that=c,this.args=y,this.active=0,this.sourceEvent=null,this.extent=t.apply(c,y),this.taps=0}v.prototype={event:function(c){return c&&(this.sourceEvent=c),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(c,y){return this.mouse&&c!=="mouse"&&(this.mouse[1]=y.invert(this.mouse[0])),this.touch0&&c!=="touch"&&(this.touch0[1]=y.invert(this.touch0[0])),this.touch1&&c!=="touch"&&(this.touch1[1]=y.invert(this.touch1[0])),this.that.__zoom=y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(c){var y=V(this.that).datum();u.call(c,this.that,new Xt(c,{sourceEvent:this.sourceEvent,target:_,type:c,transform:this.that.__zoom,dispatch:u}),y)}};function O(c,...y){if(!e.apply(this,arguments))return;var g=C(this,y).event(c),b=this.__zoom,E=Math.max(i[0],Math.min(i[1],b.k*Math.pow(2,n.apply(this,arguments)))),S=j(c);if(g.wheel)(g.mouse[0][0]!==S[0]||g.mouse[0][1]!==S[1])&&(g.mouse[1]=b.invert(g.mouse[0]=S)),clearTimeout(g.wheel);else{if(b.k===E)return;g.mouse=[S,b.invert(S)],be(this),g.start()}Se(c),g.wheel=setTimeout(T,x),g.zoom("mouse",r(N(A(b,E),g.mouse[0],g.mouse[1]),g.extent,a));function T(){g.wheel=null,g.end()}}function D(c,...y){if(h||!e.apply(this,arguments))return;var g=c.currentTarget,b=C(this,y,!0).event(c),E=V(c.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",re,!0),S=j(c,g),T=c.clientX,M=c.clientY;Me(c.view),St(c),b.mouse=[S,this.__zoom.invert(S)],be(this),b.start();function B(q){if(Se(q),!b.moved){var Q=q.clientX-T,ie=q.clientY-M;b.moved=Q*Q+ie*ie>w}b.event(q).zoom("mouse",r(N(b.that.__zoom,b.mouse[0]=j(q,g),b.mouse[1]),b.extent,a))}function re(q){E.on("mousemove.zoom mouseup.zoom",null),Ae(q.view,b.moved),Se(q),b.event(q).end()}}function L(c,...y){if(e.apply(this,arguments)){var g=this.__zoom,b=j(c.changedTouches?c.changedTouches[0]:c,this),E=g.invert(b),S=g.k*(c.shiftKey?.5:2),T=r(N(A(g,S),b,E),t.apply(this,y),a);Se(c),l>0?V(this).transition().duration(l).call(P,T,b,c):V(this).call(_.transform,T,b,c)}}function z(c,...y){if(e.apply(this,arguments)){var g=c.touches,b=g.length,E=C(this,y,c.changedTouches.length===b).event(c),S,T,M,B;for(St(c),T=0;T<b;++T)M=g[T],B=j(M,this),B=[B,this.__zoom.invert(B),M.identifier],E.touch0?!E.touch1&&E.touch0[2]!==B[2]&&(E.touch1=B,E.taps=0):(E.touch0=B,S=!0,E.taps=1+!!s);s&&(s=clearTimeout(s)),S&&(E.taps<2&&(p=B[0],s=setTimeout(function(){s=null},d)),be(this),E.start())}}function X(c,...y){if(this.__zooming){var g=C(this,y).event(c),b=c.changedTouches,E=b.length,S,T,M,B;for(Se(c),S=0;S<E;++S)T=b[S],M=j(T,this),g.touch0&&g.touch0[2]===T.identifier?g.touch0[0]=M:g.touch1&&g.touch1[2]===T.identifier&&(g.touch1[0]=M);if(T=g.that.__zoom,g.touch1){var re=g.touch0[0],q=g.touch0[1],Q=g.touch1[0],ie=g.touch1[1],J=(J=Q[0]-re[0])*J+(J=Q[1]-re[1])*J,ae=(ae=ie[0]-q[0])*ae+(ae=ie[1]-q[1])*ae;T=A(T,Math.sqrt(J/ae)),M=[(re[0]+Q[0])/2,(re[1]+Q[1])/2],B=[(q[0]+ie[0])/2,(q[1]+ie[1])/2]}else if(g.touch0)M=g.touch0[0],B=g.touch0[1];else return;g.zoom("touch",r(N(T,M,B),g.extent,a))}}function K(c,...y){if(this.__zooming){var g=C(this,y).event(c),b=c.changedTouches,E=b.length,S,T;for(St(c),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),S=0;S<E;++S)T=b[S],g.touch0&&g.touch0[2]===T.identifier?delete g.touch0:g.touch1&&g.touch1[2]===T.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(T=j(T,this),Math.hypot(p[0]-T[0],p[1]-T[1])<k)){var M=V(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return _.wheelDelta=function(c){return arguments.length?(n=typeof c=="function"?c:Xe(+c),_):n},_.filter=function(c){return arguments.length?(e=typeof c=="function"?c:Xe(!!c),_):e},_.touchable=function(c){return arguments.length?(o=typeof c=="function"?c:Xe(!!c),_):o},_.extent=function(c){return arguments.length?(t=typeof c=="function"?c:Xe([[+c[0][0],+c[0][1]],[+c[1][0],+c[1][1]]]),_):t},_.scaleExtent=function(c){return arguments.length?(i[0]=+c[0],i[1]=+c[1],_):[i[0],i[1]]},_.translateExtent=function(c){return arguments.length?(a[0][0]=+c[0][0],a[1][0]=+c[1][0],a[0][1]=+c[0][1],a[1][1]=+c[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(c){return arguments.length?(r=c,_):r},_.duration=function(c){return arguments.length?(l=+c,_):l},_.interpolate=function(c){return arguments.length?(f=c,_):f},_.on=function(){var c=u.on.apply(u,arguments);return c===u?_:c},_.clickDistance=function(c){return arguments.length?(w=(c=+c)*c,_):Math.sqrt(w)},_.tapDistance=function(c){return arguments.length?(k=+c,_):k},_}var Te=class extends Map{constructor(t,r=Oa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(let[n,o]of t)this.set(n,o)}get(t){return super.get(Yn(this,t))}has(t){return super.has(Yn(this,t))}set(t,r){return super.set(Ta(this,t),r)}delete(t){return super.delete(Ra(this,t))}};function Yn({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function Ta({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Ra({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Oa(e){return e!==null&&typeof e=="object"?e.valueOf():e}function je(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function Ze(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}var eo=require("lodash-es"),me=rr(require("@tweenjs/tween.js"),1),to=require("kapsule-2"),Tt=require("accessor-fn-2"),ro=require("canvas-color-tracker-2");var oe=require("d3-force-3d"),Qt=require("bezier-js"),Kn=require("kapsule-2"),I=require("accessor-fn-2"),Qn=rr(require("index-array-by"),1);function Xn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var jt=Symbol("implicit");function Ke(){var e=new Te,t=[],r=[],n=jt;function o(i){let a=e.get(i);if(a===void 0){if(n!==jt)return n;e.set(i,a=t.push(i)-1)}return r[a%r.length]}return o.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Te;for(let a of i)e.has(a)||e.set(a,t.push(a)-1);return o},o.range=function(i){return arguments.length?(r=Array.from(i),o):r.slice()},o.unknown=function(i){return arguments.length?(n=i,o):n},o.copy=function(){return Ke(t,r).unknown(n)},Xn.apply(o,arguments),o}function Wn(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}var Zt=Wn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var Da=Ke(Zt);function Kt(e,t,r){!t||typeof r!="string"||e.filter(n=>!n[r]).forEach(n=>{n[r]=Da(t(n))})}function jn({nodes:e,links:t},r,{nodeFilter:n=()=>!0,onLoopError:o=i=>{throw new Error(`Invalid DAG structure! Found cycle in node path: ${i.join(" -> ")}.`)}}={}){let i={};e.forEach(u=>i[r(u)]={data:u,out:[],depth:-1,skip:!n(u)}),t.forEach(({source:u,target:s})=>{let p=w(u),h=w(s);if(!i.hasOwnProperty(p))throw new Error(`Missing source node with id: ${p}`);if(!i.hasOwnProperty(h))throw new Error(`Missing target node with id: ${h}`);let d=i[p],x=i[h];d.out.push(x);function w(k){return typeof k=="object"?r(k):k}});let a=[];return f(Object.values(i)),Object.assign({},...Object.entries(i).filter(([,u])=>!u.skip).map(([u,s])=>({[u]:s.depth})));function f(u,s=[],p=0){for(let h=0,d=u.length;h<d;h++){let x=u[h];if(s.indexOf(x)!==-1){let w=[...s.slice(s.indexOf(x)),x].map(k=>r(k.data));a.some(k=>k.length===w.length&&k.every((_,A)=>_===w[A]))||(a.push(w),o(w));continue}p>x.depth&&(x.depth=p,f(x.out,[...s,x],p+(x.skip?0:1)))}}}var Ma=2,G=(e,t)=>t?.onNeedsRedraw?.(),Zn=(e,t)=>{if(!t.isShadow){let r=(0,I.accessorFn)(t.linkDirectionalParticles);t.graphData.links.forEach(n=>{let o=Math.round(Math.abs(r(n)));o?n.__photons=[...Array(o)].map(()=>({})):delete n.__photons})}},Qe=(0,Kn.Kapsule)({props:{graphData:{default:{nodes:[],links:[]},onChange(e,t){t.engineRunning=!1,Zn(e,t)}},dagMode:{onChange(e,t){!e&&(t.graphData.nodes||[]).forEach(r=>r.fx=r.fy=void 0)}},dagLevelDistance:{},dagNodeFilter:{default:e=>!0},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:G},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:G},nodeColor:{default:"color",triggerUpdate:!1,onChange:G},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:G},nodeCanvasObjectMode:{default:()=>"replace",triggerUpdate:!1,onChange:G},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:G},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:G},linkColor:{default:"color",triggerUpdate:!1,onChange:G},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:G},linkWidth:{default:1,triggerUpdate:!1,onChange:G},linkCurvature:{default:0,triggerUpdate:!1,onChange:G},linkCanvasObject:{triggerUpdate:!1,onChange:G},linkCanvasObjectMode:{default:()=>"replace",triggerUpdate:!1,onChange:G},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:G},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:G},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:G},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Zn},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange(e,t){t.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange(e,t){t.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange(e,t){t.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:()=>{},triggerUpdate:!1},onFinishUpdate:{default:()=>{},triggerUpdate:!1},onEngineTick:{default:()=>{},triggerUpdate:!1},onEngineStop:{default:()=>{},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:(e,t,r)=>{if(r===void 0)return e.forceLayout.force(t);e.forceLayout.force(t,r)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:e=>!!e.engineRunning,tickFrame:function(e){return!e.isShadow&&t(),n(),!e.isShadow&&o(),!e.isShadow&&i(),r(),this;function t(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date().getTime()-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function r(){let a=(0,I.accessorFn)(e.nodeVisibility),l=(0,I.accessorFn)(e.nodeVal),f=(0,I.accessorFn)(e.nodeColor),u=(0,I.accessorFn)(e.nodeCanvasObjectMode),s=e.ctx,p=e.isShadow/e.globalScale,h=e.graphData.nodes.filter(a);s.save(),h.forEach(d=>{let x=u(d);if(e.nodeCanvasObject&&(x==="before"||x==="replace")&&(e.nodeCanvasObject(d,s,e.globalScale),x==="replace")){s.restore();return}let w=Math.sqrt(Math.max(0,l(d)||1))*e.nodeRelSize+p;s.beginPath(),s.arc(d.x,d.y,w,0,2*Math.PI,!1),s.fillStyle=f(d)||"rgba(31, 120, 180, 0.92)",s.fill(),e.nodeCanvasObject&&x==="after"&&e.nodeCanvasObject(d,e.ctx,e.globalScale)}),s.restore()}function n(){let a=(0,I.accessorFn)(e.linkVisibility),l=(0,I.accessorFn)(e.linkColor),f=(0,I.accessorFn)(e.linkWidth),u=(0,I.accessorFn)(e.linkLineDash),s=(0,I.accessorFn)(e.linkCurvature),p=(0,I.accessorFn)(e.linkCanvasObjectMode),h=e.ctx,d=e.isShadow*2,x=e.graphData.links.filter(a);x.forEach(N);let w=[],k=[],_=x;if(e.linkCanvasObject){let m=[],P=[];x.forEach(C=>({before:w,after:k,replace:m}[p(C)]||P).push(C)),_=[...w,...k,...P],w=w.concat(m)}h.save(),w.forEach(m=>e.linkCanvasObject(m,h,e.globalScale)),h.restore();let A=(0,Qn.default)(_,[l,f,u]);h.save(),Object.entries(A).forEach(([m,P])=>{let C=!m||m==="undefined"?"rgba(0,0,0,0.15)":m;Object.entries(P).forEach(([v,O])=>{let D=(v||1)/e.globalScale+d;Object.entries(O).forEach(([L,z])=>{let X=u(z[0]);h.beginPath(),z.forEach(K=>{let c=K.source,y=K.target;if(!c||!y||!c.hasOwnProperty("x")||!y.hasOwnProperty("x"))return;h.moveTo(c.x,c.y);let g=K.__controlPoints;g?h[g.length===2?"quadraticCurveTo":"bezierCurveTo"](...g,y.x,y.y):h.lineTo(y.x,y.y)}),h.strokeStyle=C,h.lineWidth=D,h.setLineDash(X||[]),h.stroke()})})}),h.restore(),h.save(),k.forEach(m=>e.linkCanvasObject(m,h,e.globalScale)),h.restore();function N(m){let P=s(m);if(!P){m.__controlPoints=null;return}let C=m.source,v=m.target;if(!C||!v||!C.hasOwnProperty("x")||!v.hasOwnProperty("x"))return;let O=Math.sqrt(Math.pow(v.x-C.x,2)+Math.pow(v.y-C.y,2));if(O>0){let D=Math.atan2(v.y-C.y,v.x-C.x),L=O*P,z={x:(C.x+v.x)/2+L*Math.cos(D-Math.PI/2),y:(C.y+v.y)/2+L*Math.sin(D-Math.PI/2)};m.__controlPoints=[z.x,z.y]}else{let D=P*70;m.__controlPoints=[v.x,v.y-D,v.x+D,v.y]}}}function o(){let f=(0,I.accessorFn)(e.linkDirectionalArrowLength),u=(0,I.accessorFn)(e.linkDirectionalArrowRelPos),s=(0,I.accessorFn)(e.linkVisibility),p=(0,I.accessorFn)(e.linkDirectionalArrowColor||e.linkColor),h=(0,I.accessorFn)(e.nodeVal),d=e.ctx;d.save(),e.graphData.links.filter(s).forEach(x=>{let w=f(x);if(!w||w<0)return;let k=x.source,_=x.target;if(!k||!_||!k.hasOwnProperty("x")||!_.hasOwnProperty("x"))return;let A=Math.sqrt(Math.max(0,h(k)||1))*e.nodeRelSize,N=Math.sqrt(Math.max(0,h(_)||1))*e.nodeRelSize,m=Math.min(1,Math.max(0,u(x))),P=p(x)||"rgba(0,0,0,0.28)",C=w/1.6/2,v=x.__controlPoints&&new Qt.Bezier(k.x,k.y,...x.__controlPoints,_.x,_.y),O=v?y=>v.get(y):y=>({x:k.x+(_.x-k.x)*y||0,y:k.y+(_.y-k.y)*y||0}),D=v?v.length():Math.sqrt(Math.pow(_.x-k.x,2)+Math.pow(_.y-k.y,2)),L=A+w+(D-A-N-w)*m,z=O(L/D),X=O((L-w)/D),K=O((L-w*(1-.2))/D),c=Math.atan2(z.y-X.y,z.x-X.x)-Math.PI/2;d.beginPath(),d.moveTo(z.x,z.y),d.lineTo(X.x+C*Math.cos(c),X.y+C*Math.sin(c)),d.lineTo(K.x,K.y),d.lineTo(X.x-C*Math.cos(c),X.y-C*Math.sin(c)),d.fillStyle=P,d.fill()}),d.restore()}function i(){let a=(0,I.accessorFn)(e.linkDirectionalParticles),l=(0,I.accessorFn)(e.linkDirectionalParticleSpeed),f=(0,I.accessorFn)(e.linkDirectionalParticleWidth),u=(0,I.accessorFn)(e.linkVisibility),s=(0,I.accessorFn)(e.linkDirectionalParticleColor||e.linkColor),p=e.ctx;p.save(),e.graphData.links.filter(u).forEach(h=>{let d=a(h);if(!h.hasOwnProperty("__photons")||!h.__photons.length)return;let x=h.source,w=h.target;if(!x||!w||!x.hasOwnProperty("x")||!w.hasOwnProperty("x"))return;let k=l(h),_=h.__photons||[],A=Math.max(0,f(h)/2)/Math.sqrt(e.globalScale),N=s(h)||"rgba(0,0,0,0.28)";p.fillStyle=N;let m=h.__controlPoints?new Qt.Bezier(x.x,x.y,...h.__controlPoints,w.x,w.y):null,P=0,C=!1;_.forEach(v=>{let O=!!v.__singleHop;if(v.hasOwnProperty("__progressRatio")||(v.__progressRatio=O?0:P/d),!O&&P++,v.__progressRatio+=k,v.__progressRatio>=1)if(!O)v.__progressRatio=v.__progressRatio%1;else{C=!0;return}let D=v.__progressRatio,L=m?m.get(D):{x:x.x+(w.x-x.x)*D||0,y:x.y+(w.y-x.y)*D||0};p.beginPath(),p.arc(L.x,L.y,A,0,2*Math.PI,!1),p.fill()}),C&&(h.__photons=h.__photons.filter(v=>!v.__singleHop||v.__progressRatio<=1))}),p.restore()}},emitParticle:function(e,t){return t&&(!t.__photons&&(t.__photons=[]),t.__photons.push({__singleHop:!0})),this}},stateInit:()=>({forceLayout:(0,oe.forceSimulation)().force("link",(0,oe.forceLink)()).force("charge",(0,oe.forceManyBody)()).force("center",(0,oe.forceCenter)()).force("dagRadial",null).stop(),engineRunning:!1}),init(e,t){t.ctx=e},update(e){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&Kt(e.graphData.nodes,(0,I.accessorFn)(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&Kt(e.graphData.links,(0,I.accessorFn)(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(i=>{i.source=i[e.linkSource],i.target=i[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);let t=e.forceLayout.force("link");t&&t.id(i=>i[e.nodeId]).links(e.graphData.links);let r=e.dagMode&&jn(e.graphData,i=>i[e.nodeId],{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),n=Math.max(...Object.values(r||[])),o=e.dagLevelDistance||e.graphData.nodes.length/(n||1)*Ma*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(e.dagMode){let i=(f,u)=>s=>f?(r[s[e.nodeId]]-n/2)*o*(u?-1:1):void 0,a=i(["lr","rl"].indexOf(e.dagMode)!==-1,e.dagMode==="rl"),l=i(["td","bu"].indexOf(e.dagMode)!==-1,e.dagMode==="bu");e.graphData.nodes.filter(e.dagNodeFilter).forEach(f=>{f.fx=a(f),f.fy=l(f)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?(0,oe.forceRadial)(i=>{let a=r[i[e.nodeId]]||-1;return(e.dagMode==="radialin"?n-a:a)*o}).strength(i=>e.dagNodeFilter(i)?1:0):null);for(let i=0;i<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);i++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function Jt(e,t){let r=e,n=new t;return n._destructor&&n._destructor(),{linkProp:o=>({default:n[o](),onChange(i,a){r.forEach(l=>a[l][o](i))},triggerUpdate:!1}),linkMethod:o=>(i,...a)=>{let l=[];return r.forEach(f=>{let u=i[f],s=u[o](...a);s!==u&&l.push(s)}),l.length?l[0]:this}}}var Aa=800,Ia=4,R=Jt(["forceGraph"],Qe),de=Jt(["forceGraph","shadowGraph"],Qe),Na={nodeColor:R.linkProp("nodeColor"),nodeAutoColorBy:R.linkProp("nodeAutoColorBy"),nodeCanvasObject:R.linkProp("nodeCanvasObject"),nodeCanvasObjectMode:R.linkProp("nodeCanvasObjectMode"),linkColor:R.linkProp("linkColor"),linkAutoColorBy:R.linkProp("linkAutoColorBy"),linkLineDash:R.linkProp("linkLineDash"),linkWidth:R.linkProp("linkWidth"),linkCanvasObject:R.linkProp("linkCanvasObject"),linkCanvasObjectMode:R.linkProp("linkCanvasObjectMode"),linkDirectionalArrowLength:R.linkProp("linkDirectionalArrowLength"),linkDirectionalArrowColor:R.linkProp("linkDirectionalArrowColor"),linkDirectionalArrowRelPos:R.linkProp("linkDirectionalArrowRelPos"),linkDirectionalParticles:R.linkProp("linkDirectionalParticles"),linkDirectionalParticleSpeed:R.linkProp("linkDirectionalParticleSpeed"),linkDirectionalParticleWidth:R.linkProp("linkDirectionalParticleWidth"),linkDirectionalParticleColor:R.linkProp("linkDirectionalParticleColor"),dagMode:R.linkProp("dagMode"),dagLevelDistance:R.linkProp("dagLevelDistance"),dagNodeFilter:R.linkProp("dagNodeFilter"),onDagError:R.linkProp("onDagError"),d3AlphaMin:R.linkProp("d3AlphaMin"),d3AlphaDecay:R.linkProp("d3AlphaDecay"),d3VelocityDecay:R.linkProp("d3VelocityDecay"),warmupTicks:R.linkProp("warmupTicks"),cooldownTicks:R.linkProp("cooldownTicks"),cooldownTime:R.linkProp("cooldownTime"),onEngineTick:R.linkProp("onEngineTick"),onEngineStop:R.linkProp("onEngineStop"),nodeRelSize:de.linkProp("nodeRelSize"),nodeId:de.linkProp("nodeId"),nodeVal:de.linkProp("nodeVal"),nodeVisibility:de.linkProp("nodeVisibility"),linkSource:de.linkProp("linkSource"),linkTarget:de.linkProp("linkTarget"),linkVisibility:de.linkProp("linkVisibility"),linkCurvature:de.linkProp("linkCurvature")},za={d3Force:R.linkMethod("d3Force"),d3ReheatSimulation:R.linkMethod("d3ReheatSimulation"),emitParticle:R.linkMethod("emitParticle")};function er(e){if(e.canvas){let t=e.canvas.width,r=e.canvas.height;t===300&&r===150&&(t=r=0);let n=window.devicePixelRatio;t/=n,r/=n,[e.canvas,e.shadowCanvas].forEach(i=>{i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.width=e.width*n,i.height=e.height*n,!t&&!r&&i.getContext("2d").scale(n,n)});let o=W(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-t)/2/o,(e.height-r)/2/o),e.needsRedraw=!0}}function no(e){let t=window.devicePixelRatio;e.setTransform(t,0,0,t,0,0)}function Jn(e,t,r){e.save(),no(e),e.clearRect(0,0,t,r),e.restore()}var oo=(0,to.Kapsule)({props:{width:{default:window.innerWidth,onChange:(e,t)=>er(t),triggerUpdate:!1},height:{default:window.innerHeight,onChange:(e,t)=>er(t),triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:(e,t)=>{[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(r),t.forceGraph.graphData(e),t.shadowGraph.graphData(e);function r({type:n,objs:o}){o.filter(i=>{if(!i.hasOwnProperty("__indexColor"))return!0;let a=t.colorTracker.lookup(i.__indexColor);return!a||!a.hasOwnProperty("d")||a.d!==i}).forEach(i=>{i.__indexColor=t.colorTracker.register({type:n,d:i})})}},triggerUpdate:!1},backgroundColor:{onChange(e,t){t.canvas&&e&&(t.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange(e,t){t.shadowGraph.nodeCanvasObject(e?(r,n,o)=>e(r,r.__indexColor,n,o):null),t.flushShadowCanvas&&t.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange(e,t){t.shadowGraph.linkCanvasObject(e?(r,n,o)=>e(r,r.__indexColor,n,o):null),t.flushShadowCanvas&&t.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange(e,t){t.zoom.scaleExtent([e,t.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange(e,t){t.zoom.scaleExtent([t.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange(e,t){t.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:()=>{},triggerUpdate:!1},onNodeDragEnd:{default:()=>{},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1},...Na},aliases:{stopAnimation:"pauseAnimation"},methods:{graph2ScreenCoords:function(e,t,r){let n=W(e.canvas);return{x:t*n.k+n.x,y:r*n.k+n.y}},screen2GraphCoords:function(e,t,r){let n=W(e.canvas);return{x:(t-n.x)/n.k,y:(r-n.y)/n.k}},centerAt:function(e,t,r,n){if(!e.canvas)return null;if(t!==void 0||r!==void 0){let a=Object.assign({},t!==void 0?{x:t}:{},r!==void 0?{y:r}:{});return n?new me.Tween(o()).to(a,n).easing(me.Easing.Quadratic.Out).onUpdate(i).start():i(a),this}return o();function o(){let a=W(e.canvas);return{x:(e.width/2-a.x)/a.k,y:(e.height/2-a.y)/a.k}}function i({x:a,y:l}){e.zoom.translateTo(e.zoom.__baseElem,a===void 0?o().x:a,l===void 0?o().y:l),e.needsRedraw=!0}},zoom:function(e,t,r){if(!e.canvas)return null;if(t!==void 0)return r?new me.Tween({k:n()}).to({k:t},r).easing(me.Easing.Quadratic.Out).onUpdate(({k:i})=>o(i)).start():o(t),this;return n();function n(){return W(e.canvas).k}function o(i){e.zoom.scaleTo(e.zoom.__baseElem,i),e.needsRedraw=!0}},zoomToFit:function(e,t=0,r=10,...n){let o=this.getGraphBbox(...n);if(o){let i={x:(o.x[0]+o.x[1])/2,y:(o.y[0]+o.y[1])/2},a=Math.max(1e-12,Math.min(1e12,(e.width-r*2)/(o.x[1]-o.x[0]),(e.height-r*2)/(o.y[1]-o.y[0])));this.centerAt(i.x,i.y,t),this.zoom(a,t)}return this},getGraphBbox:function(e,t=()=>!0){let r=(0,Tt.accessorFn)(e.nodeVal),n=i=>Math.sqrt(Math.max(0,r(i)||1))*e.nodeRelSize,o=e.graphData.nodes.filter(t).map(i=>({x:i.x,y:i.y,r:n(i)}));return o.length?{x:[Ze(o,({x:i,r:a})=>i-a),je(o,({x:i,r:a})=>i+a)],y:[Ze(o,({y:i,r:a})=>i-a),je(o,({y:i,r:a})=>i+a)]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})},...za},stateInit:()=>({lastSetZoom:1,zoom:Wt(),forceGraph:Qe(),shadowGraph:Qe().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new ro.ColorTracker}),init:function(e,t){e.innerHTML="";let r=document.createElement("div");r.classList.add("force-graph-container"),r.style.position="relative",e.appendChild(r),t.canvas=document.createElement("canvas"),t.backgroundColor&&(t.canvas.style.background=t.backgroundColor),r.appendChild(t.canvas),t.shadowCanvas=document.createElement("canvas");let n=t.canvas.getContext("2d"),o=t.shadowCanvas.getContext("2d",{willReadFrequently:!0}),i={x:-1e12,y:-1e12},a=()=>{let u=null,s=window.devicePixelRatio,p=i.x>0&&i.y>0?o.getImageData(i.x*s,i.y*s,1,1):null;return p&&(u=t.colorTracker.lookup(p.data)),u};V(t.canvas).call(It().subject(()=>{if(!t.enableNodeDrag)return null;let u=a();return u&&u.type==="Node"?u.d:null}).on("start",u=>{let s=u.subject;s.__initialDragPos={x:s.x,y:s.y,fx:s.fx,fy:s.fy},u.active||(s.fx=s.x,s.fy=s.y),t.canvas.classList.add("grabbable")}).on("drag",u=>{let s=u.subject,p=s.__initialDragPos,h=u,d=W(t.canvas).k,x={x:p.x+(h.x-p.x)/d-s.x,y:p.y+(h.y-p.y)/d-s.y};["x","y"].forEach(w=>s[`f${w}`]=s[w]=p[w]+(h[w]-p[w])/d),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),t.isPointerDragging=!0,s.__dragged=!0,t.onNodeDrag(s,x)}).on("end",u=>{let s=u.subject,p=s.__initialDragPos,h={x:s.x-p.x,y:s.y-p.y};p.fx===void 0&&(s.fx=void 0),p.fy===void 0&&(s.fy=void 0),delete s.__initialDragPos,t.forceGraph.d3AlphaTarget()&&t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.canvas.classList.remove("grabbable"),t.isPointerDragging=!1,s.__dragged&&(delete s.__dragged,t.onNodeDragEnd(s,h))})),t.zoom(t.zoom.__baseElem=V(t.canvas)),t.zoom.__baseElem.on("dblclick.zoom",null),t.zoom.filter(u=>!u.button&&t.enableZoomPanInteraction&&(t.enableZoomInteraction||u.type!=="wheel")&&(t.enablePanInteraction||u.type==="wheel")).on("zoom",u=>{let s=u.transform;[n,o].forEach(p=>{no(p),p.translate(s.x,s.y),p.scale(s.k,s.k)}),t.onZoom&&t.onZoom({...s,...this.centerAt()}),t.needsRedraw=!0}).on("end",u=>t.onZoomEnd&&t.onZoomEnd({...u.transform,...this.centerAt()})),er(t),t.forceGraph.onNeedsRedraw(()=>t.needsRedraw=!0).onFinishUpdate(()=>{W(t.canvas).k===t.lastSetZoom&&t.graphData.nodes.length&&(t.zoom.scaleTo(t.zoom.__baseElem,t.lastSetZoom=Ia/Math.cbrt(t.graphData.nodes.length)),t.needsRedraw=!0)});let l=document.createElement("div");l.classList.add("graph-tooltip"),r.appendChild(l),["pointermove","pointerdown"].forEach(u=>r.addEventListener(u,s=>{u==="pointerdown"&&(t.isPointerPressed=!0,t.pointerDownEvent=s),!t.isPointerDragging&&s.type==="pointermove"&&t.onBackgroundClick&&(s.pressure>0||t.isPointerPressed)&&(s.pointerType!=="touch"||s.movementX===void 0||[s.movementX,s.movementY].some(d=>Math.abs(d)>1))&&(t.isPointerDragging=!0);let p=h(r);i.x=s.pageX-p.left,i.y=s.pageY-p.top,l.style.top=`${i.y}px`,l.style.left=`${i.x}px`,l.style.transform=`translate(-${i.x/t.width*100}%, ${t.height-i.y<100?"calc(-100% - 8px)":"21px"})`;function h(d){let x=d.getBoundingClientRect(),w=window.pageXOffset||document.documentElement.scrollLeft,k=window.pageYOffset||document.documentElement.scrollTop;return{top:x.top+k,left:x.left+w}}},{passive:!0})),r.addEventListener("pointerup",u=>{if(t.isPointerPressed=!1,t.isPointerDragging){t.isPointerDragging=!1;return}let s=[u,t.pointerDownEvent];requestAnimationFrame(()=>{if(u.button===0)if(t.hoverObj){let p=t[`on${t.hoverObj.type}Click`];p&&p(t.hoverObj.d,...s)}else t.onBackgroundClick&&t.onBackgroundClick(...s);if(u.button===2)if(t.hoverObj){let p=t[`on${t.hoverObj.type}RightClick`];p&&p(t.hoverObj.d,...s)}else t.onBackgroundRightClick&&t.onBackgroundRightClick(...s)})},{passive:!0}),r.addEventListener("contextmenu",u=>!t.onBackgroundRightClick&&!t.onNodeRightClick&&!t.onLinkRightClick?!0:(u.preventDefault(),!1)),t.forceGraph(n),t.shadowGraph(o);let f=(0,eo.throttle)(()=>{Jn(o,t.width,t.height),t.shadowGraph.linkWidth(s=>(0,Tt.accessorFn)(t.linkWidth)(s)+t.linkHoverPrecision);let u=W(t.canvas);t.shadowGraph.globalScale(u.k).tickFrame()},Aa);t.flushShadowCanvas=f.flush,(this._animationCycle=function u(){let s=!t.autoPauseRedraw||!!t.needsRedraw||t.forceGraph.isEngineRunning()||t.graphData.links.some(p=>p.__photons&&p.__photons.length);if(t.needsRedraw=!1,t.enablePointerInteraction){let p=t.isPointerDragging?null:a();if(p!==t.hoverObj){let h=t.hoverObj,d=h?h.type:null,x=p?p.type:null;if(d&&d!==x){let k=t[`on${d}Hover`];k&&k(null,h.d)}if(x){let k=t[`on${x}Hover`];k&&k(p.d,d===x?h.d:null)}let w=p&&(0,Tt.accessorFn)(t[`${p.type.toLowerCase()}Label`])(p.d)||"";l.style.visibility=w?"visible":"hidden",l.innerHTML=w,t.canvas.classList[p&&t[`on${x}Click`]||!p&&t.onBackgroundClick?"add":"remove"]("clickable"),t.hoverObj=p}s&&f()}if(s){Jn(n,t.width,t.height);let p=W(t.canvas).k;t.onRenderFramePre&&t.onRenderFramePre(n,p),t.forceGraph.globalScale(p).tickFrame(),t.onRenderFramePost&&t.onRenderFramePost(n,p)}me.update(),t.animationFrameRequestId=requestAnimationFrame(u)})()},update:function(t){}});
